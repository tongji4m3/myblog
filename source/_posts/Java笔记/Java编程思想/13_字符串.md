---
title: 第十三章--字符串
author: tongji4m3
top: false
cover: false
coverImg: /images/1.jpg
toc: true
mathjax: false
summary: '<<Java编程思想>>读书笔记,第十三章--字符串。'
categories: Java编程思想
tags:
  - Java基础
  - 字符串
  - 正则表达式
abbrlink: 6c3751ad
date: 2020-10-31 00:00:00
---

> <<Java编程思想>>读书笔记

# 不可变String

+ `String`对象是不可变的,任何一个操纵都是创建了一个全新的`String`对象以包含修改后的字符串内容
+ 每当把`String`对象作为方法的参数时,都会复制一份引用,而该引用所指的对象其实一直待在单一的物理位置上
+ 所有指向`String`的任何引用都不可能改变他的值
+ 如果字符串操作比较简单,直接相信编译器会合理的构造,否则还是自己创建一个`StringBuilder`
+ 在`toString`方法中,如果要打印出对象的内存地址,应该调用`Object.toString()`,所以应该调用的是`super.toString()`,而不能调用`this.toString()`(会递归)
+ `String`的操作中,如果需要改变字符串的内容,则会返回一个新的`String`对象.如果内容没有改变,则返回原对象的引用

# printf

`String.format`效果一样

```java
public static void main(String[] args)
{
    Random random = new Random(12);
    for (int i = 0; i < 10; i++)
    {
        double price = random.nextDouble();
        String description = "ABCDEFGHIJKLMNOPQ".substring(random.nextInt(10));
        System.out.printf("%-15.15s,%5.2f\n",description,price);
    }
}
/*
GHIJKLMNOPQ    , 0.73
BCDEFGHIJKLMNOP, 0.22
GHIJKLMNOPQ    , 0.94
CDEFGHIJKLMNOPQ, 0.93
FGHIJKLMNOPQ   , 0.33
BCDEFGHIJKLMNOP, 0.84
ABCDEFGHIJKLMNO, 0.89
HIJKLMNOPQ     , 0.53
HIJKLMNOPQ     , 0.92
HIJKLMNOPQ     , 0.36
*/
```

# 正则表达式

## String

```java
    public static void main(String[] args)
    {
        if("12-".matches("\\d+-?"))
        {
            System.out.println(true);
        }

        String s = "test a hello world test";
        System.out.println(Arrays.toString(s.split(" ")));

        //me a hello world me
        System.out.println(s.replaceAll("test", "me"));
    }
```

## 规则

+ `.`匹配任意字符
+ `[abc]`三个字符之间
+ `[^abc]`除了abc
+ `\s`空白符
+ `\d`数字
+ `\w`单词字符`[a-zA-Z0-9]`
+ `XY`X跟在Y后面
+ `X|Y`X或Y
+ `^$`开始和结束
+ `?`一个或零个
+ `*`零个或多个
+ `+`一个或多个
+ `X{n}`,恰好n次



# Pattern

```java
Pattern compile = Pattern.compile("\\w+");
Matcher matcher = compile.matcher("12,3A");
//matches()判断整个输入字符串是否匹配
//lookingAt()判断字符串的开始部分是否匹配
//find()可以查找多个匹配,也能接收一个整数作为字符串搜索的起点位置
if(matcher.find(3))
{
    System.out.println(matcher.start()+","+matcher.end());
    //3,5
}
```

```java
//Pattern.CASE_INSENSITIVE忽略大小写
//Pattern.MULTILINE 正则表达式中出现了^或者$, 默认只会匹配第一行. 设置了Pattern.MULTILINE模式,会匹配所有行。
Pattern compile = Pattern.compile("^java", Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);
Matcher matcher = compile.matcher("java has regex \nJava has regex \nJAVA");
while(matcher.find())
{
    System.out.println(matcher.group());
    /*
    java
    Java
    JAVA
     */
}
```

# Scanner

+ `Scanner`构造器接收任何类型的输入对象
+ 普通的`next()`方法返回下一个`String`
+ 所有`next()`方法只有找到一个完整的分词后才会返回
+ `Scanner`假设在输入结束时抛出`IOException`
+ 默认以空白字符对输入进行分词