---
title: 第五章--初始化与清理
author: tongji4m3
top: false
cover: false
coverImg: /images/1.jpg
toc: true
mathjax: false
summary: '<<Java编程思想>>读书笔记,第五章--初始化与清理。'
categories: Java编程思想
tags:
  - Java基础
  - 构造函数
  - 初始化
abbrlink: 4f7140bc
date: 2020-10-20 00:00:00
---

> <<Java编程思想>>读书笔记

# 构造器

+ 不能以返回值重载方法是因为有时不关心方法的返回值,只是要他的执行效果.就会这样调用方法:`f()`.
+ 如果没有写构造器,编译器会自动创建默认构造器;如果已经定义了构造器,则不会默认自动创建
+ 执行类似`x.f(1)`方法时,编译器把所操作对象的引用作为第一个参数传递给了`f()`,实际上就形如`X.f(x,1)`.
+ 所以在方法内部,如果想获得对调用方法的那个对象的引用,则用`this`
+ 在方法内部调用同一个类的另一个方法,不必用`this`,因为当前方法的`this`引用会自动应用于同一类中的所有方法
+ 构造器中可以用`this`来调用另一个构造器,但是只能置于最起始处,而且只能调用一次

# 成员初始化

+ 方法中的局部变量,`Java`以编译错误的形式来保证所有变量在使用前都能得到恰当的初始化
+ 在类中定义一个对象引用,若没有初始化,则会获得特殊值--`null`
+ 无法阻止自动初始化的进行,他将会在构造器被调用前发生
+ 变量定义会在任何方法(包括构造器)被调用之前得到初始化
+ 静态初始化只在必要时刻才会进行,且不会再次被初始化

```java
private int i;

public MainTest()
{
    i = 7;
}
//i首先会置为0,然后变成7
```

# 过程

+ 当静态方法/静态域首次被访问时，`java`解释器必须查找类路径,单位`Dog.class`
+ 载入`Dog.class`,执行且只执行静态初始化操作一次
+ 当使用`new Dog()`创建对象时,在堆上为该对象分配足够的存储空间
+ 存储空间清零,就自动的把所有基本类型数据设为默认值,引用设置为`null`
+ 执行字段定义处的初始化动作
+ 执行构造器

# 枚举

```java
public enum Spiciness
{
    NOT,MILD,MEDIUM,HOT,FLAMING
}
```



```java
Spiciness hot = Spiciness.HOT;
System.out.println(hot);
//HOT

for (Spiciness s : Spiciness.values())
{
    System.out.println(s + " ordinal " + s.ordinal());
}
//NOT ordinal 0
//MILD ordinal 1
//MEDIUM ordinal 2
//HOT ordinal 3
//FLAMING ordinal 4
```