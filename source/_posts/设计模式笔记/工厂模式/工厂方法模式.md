---
title: 设计模式--工厂方法模式
author: tongji4m3
top: true
cover: false
coverImg: /images/1.jpg
toc: true
mathjax: false
summary: '学习《Head Frist 设计模式》所做的笔记,主要介绍了工厂方法模式的原则,类图,代码实现。'
categories: 设计模式笔记
tags:
  - 设计模式
  - Java
  - UML
abbrlink: 98f870a2
date: 2020-09-27 00:00:00
---
# 工厂方法模式
## 定义

工厂方法模式定义了一个创建对象的接口,但由子类决定要实例化的类是哪一个。工厂方法让类把实例化推迟到子类。

## 设计原则

要依赖抽象，不要依赖具体类。

即不能让高级组件依赖低层组件。

## 指导方针

1. 变量不可以持有具体类的引用（改用工厂模式）
2. 不要让类派生自具体类（用接口创建）
3. 不要覆盖基类中已实现方法



## 工厂方法模式类图

![image-20200928104712021](https://tongji4m3.oss-cn-beijing.aliyuncs.com/image-20200928104712021.png)



# 实现

## creator相关

```java
public abstract class PizzaStore
{
    public Pizza orderPizza(String type)
    {
        Pizza pizza;
        pizza = createPizza(type);

        pizza.prepare();
        pizza.bake();
        pizza.cut();
        pizza.box();

        return pizza;
    }

    protected abstract Pizza createPizza(String type);
}
```

```java
public class NYPizzaStore extends PizzaStore
{
    @Override
    protected Pizza createPizza(String type)
    {
        return new NYStyleCheesePizza();
    }
}
```

```java
public class ChicagoPizzaStore extends PizzaStore
{
    @Override
    protected Pizza createPizza(String type)
    {
        return new ChicagoStyleCheesePizza();
    }
}
```

## product相关

```java
public class Pizza
{
    String name;
    String dough;
    String sauce;
    ArrayList<String> toppings = new ArrayList<>();

    public void prepare()
    {
        System.out.println("Preparing--"+name);
        System.out.println("dough--"+dough);
        System.out.println("sauce--"+sauce);
        for (String topping : toppings)
        {
            System.out.println(topping);
        }
        System.out.println("---------------");
    }

    public void bake()
    {
        System.out.println("bake");
    }

    public void cut()
    {
        System.out.println("cut");
    }

    public void box()
    {
        System.out.println("box");
    }

    public String getName()
    {
        return name;
    }
}
```

```java
public class NYStyleCheesePizza extends Pizza
{
    public NYStyleCheesePizza()
    {
        name = "NYStyleCheesePizza";
        dough = "NYStyleCheesePizza";
        sauce = "NYStyleCheesePizza";
        toppings.add("NYStyleCheesePizza");
    }
}
```

```java
public class ChicagoStyleCheesePizza extends Pizza
{
    public ChicagoStyleCheesePizza()
    {
        name = "ChicagoStyleCheesePizza";
        dough = "ChicagoStyleCheesePizza";
        sauce = "ChicagoStyleCheesePizza";
        toppings.add("ChicagoStyleCheesePizza");
    }
}
```

## MainTest

```java
public class MainTest
{
    public static void main(String[] args)
    {
        PizzaStore nyStore = new NYPizzaStore();
        PizzaStore chicagoStore = new ChicagoPizzaStore();

        Pizza pizza = nyStore.orderPizza("cheese");
        Pizza pizza2 = chicagoStore.orderPizza("cheese");

    }
}
```