---
title: 设计模式--抽象工厂模式
author: tongji4m3
top: false
cover: false
coverImg: /images/1.jpg
toc: true
mathjax: false
summary: '学习《Head Frist 设计模式》所做的笔记,主要介绍了抽象工厂模式的原则,类图,代码实现。'
categories: 设计模式笔记
tags:
  - 设计模式
  - Java
  - UML
abbrlink: 4bdc9a59
date: 2020-09-29 00:00:00
---
# 抽象工厂模式
## 定义

抽象工厂模式提供一个接口,用于创建相关或依赖对象的家族,而不需要明确指定具体类。

## 细节

1. 工厂方法模式使用继承,抽象工厂模式使用组合
2. 依赖抽象,不要依赖具体类
3. 对象的创建被实现再工厂接口所暴露出来的方法中

## 类图

![image-20201001163131160](https://tongji4m3.oss-cn-beijing.aliyuncs.com/image-20201001162740771.png)

# 实现

## Dough

```java
public interface Dough
{
}
```

```java
public class ThickCrustDough implements Dough
{
}
```

```java
public class ThinCrustDough implements Dough
{
}
```

## Sauce

```java
public interface Sauce
{
}
```

```java
public class PlumTomatoSauce implements Sauce
{
}
```

```java
public class MarinaraSauce implements Sauce
{
}
```

## factory

```java
public interface PizzaIngredientFactory
{
    Dough createDough();

    Sauce createSauce();
}
```

```java
public class ChicagoPizzaIngredientFactory implements PizzaIngredientFactory
{
    @Override
    public Dough createDough()
    {
        return new ThickCrustDough();
    }

    @Override
    public Sauce createSauce()
    {
        return new PlumTomatoSauce();
    }
}
```

```java
public class NYPizzaIngredientFactory implements PizzaIngredientFactory
{
    @Override
    public Dough createDough()
    {
        return new ThickCrustDough();
    }

    @Override
    public Sauce createSauce()
    {
        return new MarinaraSauce();
    }
}
```

## Pizza

```java
public abstract class Pizza
{
    String name;
    Dough dough;
    Sauce sauce;
   

    abstract void prepare();


    public void bake()
    {
        System.out.println("bake");
    }

    public void cut()
    {
        System.out.println("cut");
    }

    public void box()
    {
        System.out.println("box");
    }

    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
        this.name = name;
    }
}
```

```java
public class CheesePizza extends Pizza
{
    PizzaIngredientFactory ingredientFactory;

    public CheesePizza(PizzaIngredientFactory ingredientFactory)
    {
        this.ingredientFactory = ingredientFactory;
    }

    @Override
    void prepare()
    {
        System.out.println("Prepare---"+name);
        dough = ingredientFactory.createDough();
        sauce = ingredientFactory.createSauce();
    }
}
```

## store

```java
public abstract class PizzaStore
{
    public Pizza orderPizza(String type)
    {
        Pizza pizza;
        pizza = createPizza(type);

        pizza.prepare();
        pizza.bake();
        pizza.cut();
        pizza.box();

        return pizza;
    }

    protected abstract Pizza createPizza(String type);
}
```

```java
public class NYPizzaStore extends PizzaStore
{
    @Override
    protected Pizza createPizza(String type)
    {
        Pizza pizza = null;
        PizzaIngredientFactory ingredientFactory = new NYPizzaIngredientFactory();
        pizza = new CheesePizza(ingredientFactory);
        return pizza;
    }
}
```

## MainTest

```java
public class MainTest
{
    public static void main(String[] args)
    {
        PizzaStore nyPizzaStore = new NYPizzaStore();
        nyPizzaStore.orderPizza("cheese");
    }
}
```