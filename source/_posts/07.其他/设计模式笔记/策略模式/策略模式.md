---
title: 设计模式--策略模式
author: tongji4m3
top: false
cover: false
coverImg: /images/1.jpg
toc: true
mathjax: false
summary: '学习《Head Frist 设计模式》所做的笔记,主要介绍了策略模式的原则,类图,代码实现。'
categories: 设计模式笔记
tags:
  - 设计模式
  - Java
  - UML
abbrlink: eee4fbd1
date: 2020-09-15 00:00:00
---

# 策略模式
## 策略模式定义
定义了算法族，分别封装起来，让他们之间可以互相替换，此模式让算法的变化**独立**于使用算法的客户。

## 设计原则

1. 找出应用可能需要变化之处,把他们独立出来,不要和那些不需要变化的代码混在一起。封装变化。
2. 针对接口编程，而不是针对实现编程。
3. 多用组合，少用继承。


## 针对接口编程

利用多态，程序可以针对超类型编程，执行时会根据实际状况执行到真正的行为。更明确的说是变量的声明类型应该是超类型



# 类图

用接口代表每个行为，而行为的每个实现都将实现其中一个接口

![image-20200923193518271](https://tongji4m3.oss-cn-beijing.aliyuncs.com/image-20200923193518271.png)

# 实现

## FlyBehavior接口相关

```java
public interface FlyBehavior
{
    void fly();
}
```

```java
public class FlyWithWings implements FlyBehavior
{
    @Override
    public void fly()
    {
        System.out.println("I am flying!");
    }
}
```

```java
public class FlyNoWay implements FlyBehavior
{
    @Override
    public void fly()
    {
        System.out.println("I can't flying!");
    }
}
```

```java
public class FlyRocketPowered implements FlyBehavior
{
    @Override
    public void fly()
    {
        System.out.println("I FlyRocketPowered!");
    }
}
```

## QuackBehavior接口相关

```java
public interface QuackBehavior
{
    void quack();
}
```

```java
public class Quack implements QuackBehavior
{
    @Override
    public void quack()
    {
        System.out.println("Quack");
    }
}
```

```java
public class MuteQuack implements QuackBehavior
{
    @Override
    public void quack()
    {
        System.out.println("Silence");
    }
}
```

## Duck相关

```java
public class Duck
{
    FlyBehavior flyBehavior;
    QuackBehavior quackBehavior;

    public void setFlyBehavior(FlyBehavior flyBehavior)
    {
        this.flyBehavior = flyBehavior;
    }

    public void setQuackBehavior(QuackBehavior quackBehavior)
    {
        this.quackBehavior = quackBehavior;
    }

    public void performFly()
    {
        flyBehavior.fly();
    }

    public void performQuack()
    {
        quackBehavior.quack();
    }

    public void swim()
    {
        System.out.println("All ducks float");
    }

    public void display()
    {
        System.out.println("display duck");
    }
}
```

```java
public class ModelDuck extends Duck
{
    public ModelDuck()
    {
        flyBehavior = new FlyNoWay();
        quackBehavior = new Quack();
    }

    @Override
    public void display()
    {
        System.out.println("I am model Duck");
    }
}
```

## MainTest

```java
public class MainTest
{
    public static void main(String[] args)
    {
        Duck model = new ModelDuck();
        model.performFly();
        model.setFlyBehavior(new FlyRocketPowered());
        model.performFly();
        /*
        输出:
        I can't flying!
        I FlyRocketPowered!
         */
    }
}
```